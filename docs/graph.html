<!DOCTYPE html>

<html>
<head>
  <title>graph.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="graph.html">
                graph.js
              </a>
            
              
              <a class="source" href="helpers.html">
                helpers.js
              </a>
            
              
              <a class="source" href="index.html">
                index.js
              </a>
            
              
              <a class="source" href="neo4jrestful.html">
                neo4jrestful.js
              </a>
            
              
              <a class="source" href="node.html">
                node.js
              </a>
            
              
              <a class="source" href="path.html">
                path.js
              </a>
            
              
              <a class="source" href="relationship.html">
                relationship.js
              </a>
            
              
              <a class="source" href="transaction.html">
                transaction.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>graph.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <p><strong>The Graph</strong> respresents the database
You can perform basic actions and queries directly on the entire graphdatabase</p>
<h3><a href="http://docs.neo4j.org/refcard/2.0/">Query Structure</a></h3>
<p>Read Query Structure:
[START]
[MATCH]
[WHERE]
[WITH [ORDER BY] [SKIP] [LIMIT]]
RETURN [ORDER BY] [SKIP] [LIMIT]</p>
<p>Write-Only Query Structure:
(CREATE [UNIQUE] | MERGE)<em>
[SET|DELETE|FOREACH]</em>
[RETURN [ORDER BY] [SKIP] [LIMIT]]</p>
<p>Read-Write Query Structure:
[START]
[MATCH]
[WHERE]
[WITH [ORDER BY] [SKIP] [LIMIT]]
[CREATE [UNIQUE]|MERGE]<em>
[SET|DELETE|FOREACH]</em>
[RETURN [ORDER BY] [SKIP] [LIMIT]]</p>
<p>TODO: maybe check of valid query structure?!</p>
<p>Initialize the Graph object with a neo4jrestful client</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="keyword">var</span> __initGraph__ = <span class="keyword">function</span>(neo4jrestful) {</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Requirements (for browser and nodejs):
  <em> neo4jmapper helpers
  </em> underscorejs</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="keyword">var</span> _       = <span class="literal">null</span>;
  <span class="keyword">var</span> helpers = <span class="literal">null</span>;

  <span class="keyword">if</span> (<span class="keyword">typeof</span> window === <span class="string">'object'</span>) {
    helpers = window.Neo4jMapper.helpers;
    _       = window._;
  } <span class="keyword">else</span> {
    helpers = require(<span class="string">'./helpers'</span>);
    _       = require(<span class="string">'underscore'</span>);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Ensure that we have a Neo4jRestful client we can work with</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="keyword">if</span> ((<span class="keyword">typeof</span> neo4jrestful !== <span class="string">'undefined'</span>) &amp;&amp; (helpers.constructorNameOfFunction(neo4jrestful) !== <span class="string">'Neo4jRestful'</span>))
    <span class="keyword">throw</span> Error(<span class="string">'You have to use an Neo4jRestful object as argument'</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Constructor of Graph</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="keyword">var</span> Graph = <span class="function"><span class="keyword">function</span> <span class="title">Graph</span><span class="params">(url)</span> {</span>
    <span class="keyword">if</span> (url) {
      <span class="keyword">this</span>.neo4jrestful = <span class="keyword">new</span> neo4jrestful.constructor(url);
    }
    <span class="keyword">this</span>.resetQuery();
    <span class="keyword">return</span> <span class="keyword">this</span>;
  }

  Graph.prototype.neo4jrestful                  = neo4jrestful;
  Graph.prototype._query_history_               = <span class="literal">null</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>see graph.resetQuery() for initialization</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Graph.prototype.cypher = {
    query: <span class="literal">null</span>,                                                <span class="comment">// the cypher query string</span>
    parameters: <span class="literal">null</span>,                                           <span class="comment">// object with paremeters</span>
    _useParameters: <span class="literal">true</span>                                        <span class="comment">// better performance + rollback possible (upcoming feature)</span>
  };
  Graph.prototype._queryString_                 = <span class="string">''</span>;           <span class="comment">// stores a query string temporarily</span>
  Graph.prototype._loadOnResult_                = <span class="string">'node|relationship|path'</span>;
  Graph.prototype._resortResults_               = <span class="literal">true</span>;         <span class="comment">// see in graph.query() -&gt; _increaseDone()</span>
  Graph.prototype._nativeResults_               = <span class="literal">false</span>;        <span class="comment">// it's not implemented, all results are processed so far</span>

  Graph.prototype.info                          = <span class="literal">null</span>;         <span class="comment">// contains the info response of the neo4j database</span>

  Graph.prototype._response_                    = <span class="literal">null</span>;         <span class="comment">// contains the last response object</span>
  Graph.prototype._columns_                     = <span class="literal">null</span>;         <span class="comment">// contains `columns` of { columns: [ … ], data: [ … ] }</span>

  Graph.prototype.exec = <span class="keyword">function</span>(query, cb) {
    <span class="keyword">if</span> (<span class="keyword">typeof</span> query !== <span class="string">'string'</span>) {
      cb = query;
      query = <span class="keyword">this</span>.toCypherQuery();
    }
    <span class="keyword">if</span> (<span class="keyword">typeof</span> cb === <span class="string">'function'</span>) {
      <span class="keyword">this</span>.query(query, {}, cb);
    }
    <span class="keyword">return</span> <span class="keyword">this</span>;
  }

  Graph.prototype.query = <span class="keyword">function</span>(cypherQuery, options, cb) {
    <span class="keyword">var</span> self = <span class="keyword">this</span>;
    <span class="keyword">if</span> (<span class="keyword">typeof</span> cypherQuery !== <span class="string">'string'</span>) {
      <span class="keyword">throw</span> Error(<span class="string">'First argument must be a query string'</span>);
    }
    <span class="keyword">if</span> (<span class="keyword">typeof</span> options === <span class="string">'function'</span>) {
      cb = options;
      options = {};
    }
    <span class="keyword">if</span> (<span class="keyword">typeof</span> options !== <span class="string">'object'</span>) {
      options = {};
    }

    options.params = (<span class="keyword">typeof</span> <span class="keyword">this</span>.cypher._useParameters === <span class="string">'boolean'</span>) ? <span class="keyword">this</span>.cypher.parameters : {};
    options.context = self;</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>we expect a cb in most cases and perfom the query immediately</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (<span class="keyword">typeof</span> cb === <span class="string">'function'</span>) {
      <span class="keyword">this</span>.neo4jrestful.query(cypherQuery, options, <span class="keyword">function</span>(err, res, debug) {
        self._processResult(err, res, debug, options, <span class="keyword">function</span>(err, res, debug) {</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Is used by Node on performing an &quot;update&quot; via a cypher query
The result length is 1, so we remove the array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">if</span> ((res)&amp;&amp;(res.length===<span class="number">1</span>)&amp;&amp;(options.cypher)) {
            <span class="keyword">if</span> ((options.cypher.limit === <span class="number">1</span>) || (options.cypher._update) || (<span class="keyword">typeof</span> res[<span class="number">0</span>] !== <span class="string">'object'</span>)) {
              res = res[<span class="number">0</span>];
            }
          }
          cb(err, res, debug);
        });
      });
    } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>otherwise we store the query string and expect it will be executed with <code>.exec(cb)</code> or <code>.stream(cb)</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">this</span>._queryString_ = cypherQuery;
    }

    <span class="keyword">return</span> <span class="keyword">this</span>;
  }

  Graph.prototype._processResult = <span class="keyword">function</span>(err, result, debug, options, cb) {
    <span class="keyword">var</span> self = options.context;
    self._response_ = self.neo4jrestful._response_;
    self._columns_ = self.neo4jrestful._columns_;
    <span class="keyword">if</span> (err)
      <span class="keyword">return</span> cb(err, result, debug);
    <span class="keyword">var</span> loadNode = <span class="regexp">/node/i</span>.test(self._loadOnResult_)
      , loadRelationship = <span class="regexp">/relation/i</span>.test(self._loadOnResult_)
      , loadPath = <span class="regexp">/path/i</span>.test(self._loadOnResult_)
      , todo = <span class="number">0</span>
      , done = <span class="number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>if we have the native mode, return results instantly at this point
TODO: to be implemented</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (self._nativeResults_)</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>we turned off all loading hooks and no sorting -&gt; so lets return the native result</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">return</span> cb(err, result, debug);</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>increase the number of done jobs
resort the results if options is activated
and finally invoke the cb if we are done</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> __increaseDone = <span class="keyword">function</span>() {
      <span class="keyword">if</span> (done+<span class="number">1</span> &gt;= todo) {</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>all jobs are done</p>
<p>if is set to true, sort result:
<em> return only the data (columns are attached to graph.<em>columns</em>)
</em> remove array if we only have one column
e.g. { columns: [ &#39;count&#39; ], data: [ { 1 } ] } -&gt; 1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (self._resortResults_) {
          <span class="keyword">var</span> cleanResult = result.data;</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>remove array, if we have only one column</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">if</span> (result.columns.length === <span class="number">1</span>) {
            <span class="keyword">for</span> (<span class="keyword">var</span> row=<span class="number">0</span>; row &lt; cleanResult.length; row++) {
              cleanResult[row] = cleanResult[row][<span class="number">0</span>];
            }
          }
          cb(err, cleanResult, debug);
        } <span class="keyword">else</span> {
          cb(err, result, debug);
        }
      } <span class="keyword">else</span> {
        done++;
      }
    }

    <span class="keyword">if</span> ((!result.data)&amp;&amp;(result.length === <span class="number">1</span>)) {
      <span class="keyword">return</span> cb(err, result[<span class="number">0</span>], debug);
    }

    <span class="keyword">for</span> (<span class="keyword">var</span> row=<span class="number">0</span>; row &lt; result.data.length; row++) {
      <span class="keyword">for</span> (<span class="keyword">var</span> column=<span class="number">0</span>; column &lt; result.data[row].length; column++) {
        <span class="keyword">var</span> data = result.data[row][column];</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>try to create an instance if we have an object here</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">var</span> object = ((<span class="keyword">typeof</span> data === <span class="string">'object'</span>) &amp;&amp; (data !== <span class="literal">null</span>)) ? self.neo4jrestful.createObjectFromResponseData(data, options.recommendConstructor) : data;
        result.data[row][column] = object;

        (<span class="keyword">function</span>(object, isLastObject) {

          <span class="keyword">if</span> (object) {
            <span class="keyword">if</span> ((object.classification === <span class="string">'Node'</span>) &amp;&amp; (loadNode)) {
              todo++;
              object.load(__increaseDone);
            }
            <span class="keyword">else</span> <span class="keyword">if</span> ((object.classification === <span class="string">'Relationship'</span>) &amp;&amp; (loadRelationship)) {
              todo++;
              object.load(__increaseDone);
            }
            <span class="keyword">else</span> <span class="keyword">if</span> ((object.classification === <span class="string">'Path'</span>) &amp;&amp; (loadPath)) {
              todo++;
              object.load(__increaseDone);
            }
          }</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>if no loading is activated and at the last row+column, execute cb</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">if</span> ((isLastObject) &amp;&amp; (todo === <span class="number">0</span>))
            __increaseDone();

        })(object, (row === result.data.length-<span class="number">1</span>) &amp;&amp; (column === result.data[row].length-<span class="number">1</span>));
      }
    }
    <span class="keyword">if</span> ((todo === <span class="number">0</span>) &amp;&amp; (done === <span class="number">0</span>) &amp;&amp; (result.data.length === <span class="number">0</span>)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>empty result</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">return</span> cb(err, <span class="literal">null</span>, debug);
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <h3>Shortcut for neo4jrestul.stream</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Graph.prototype.stream = <span class="keyword">function</span>(cypherQuery, options, cb) {
    <span class="keyword">var</span> self = <span class="keyword">this</span>;
    <span class="keyword">var</span> Node = Graph.Node;
    <span class="keyword">var</span> recommendConstructor = (options) ? options.recommendConstructor || Node : Node;
    <span class="keyword">if</span> (<span class="keyword">typeof</span> cypherQuery !== <span class="string">'string'</span>) {
      cb = cypherQuery;
      cypherQuery = <span class="keyword">this</span>.toCypherQuery();
    }
    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> options === <span class="string">'function'</span>) {
      cb = options;
      options = <span class="literal">undefined</span>;
    }
    <span class="keyword">this</span>.neo4jrestful.stream(cypherQuery, options, <span class="keyword">function</span>(data, response) {</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>neo4jrestful alerady created an object, but not with a recommend constructor</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      self._columns_ = response._columns_;
      <span class="keyword">if</span> ((data) &amp;&amp; (<span class="keyword">typeof</span> data === <span class="string">'object'</span>) &amp;&amp; (data._response_)) {
        data = self.neo4jrestful.createObjectFromResponseData(data._response_, recommendConstructor);
      }
      cb(data, self);
    });
    <span class="keyword">return</span> <span class="keyword">this</span>;
  }

  Graph.prototype.each = Graph.prototype.stream;

  Graph.prototype.parameters = <span class="keyword">function</span>(parameters) {
    <span class="keyword">if</span> (<span class="keyword">typeof</span> parameters !== <span class="string">'object'</span>)
      <span class="keyword">throw</span> Error(<span class="string">'parameter(s) as argument must be an object, e.g. { key: "value" }'</span>)
    <span class="keyword">if</span> (<span class="keyword">this</span>.cypher._useParameters === <span class="literal">null</span>)
      <span class="keyword">this</span>.cypher._useParameters = <span class="literal">true</span>;
    <span class="keyword">this</span>.cypher.parameters = parameters;
    <span class="keyword">return</span> <span class="keyword">this</span>;
  }

  Graph.prototype.addParameters = <span class="keyword">function</span>(parameters) {
    <span class="keyword">if</span> (<span class="keyword">typeof</span> parameters !== <span class="string">'object'</span>)
      <span class="keyword">throw</span> Error(<span class="string">'parameter(s) as argument must be an object, e.g. { key: "value" }'</span>)
    <span class="keyword">if</span> (<span class="keyword">this</span>.cypher._useParameters === <span class="literal">null</span>)
      <span class="keyword">this</span>.cypher._useParameters = <span class="literal">true</span>;
    <span class="keyword">if</span> (!<span class="keyword">this</span>.cypher.parameters)
      <span class="keyword">this</span>.cypher.parameters = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>_.extend(this.cypher.parameters, parameters);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">for</span> (<span class="keyword">var</span> attr <span class="keyword">in</span> parameters) {
      <span class="keyword">this</span>.cypher.parameters[attr] = parameters[attr];
    }
    <span class="keyword">return</span> <span class="keyword">this</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <h3>Deletes <em>all</em> nodes and <em>all</em> relationships</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Graph.prototype.wipeDatabase = <span class="keyword">function</span>(cb) {
    <span class="keyword">var</span> query = <span class="string">"START n=node(*) MATCH n-[r?]-() DELETE n, r;"</span>;
    <span class="keyword">return</span> <span class="keyword">this</span>.query(query, cb);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <h3>Counts all objects of a specific type: (all|node|relationship|[nr]:Movie)</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Graph.prototype.countAllOfType = <span class="keyword">function</span>(type, cb) {
    <span class="keyword">var</span> query = <span class="string">''</span>;
    <span class="keyword">if</span>      (<span class="regexp">/^n(ode)*$/i</span>.test(type))
      query = <span class="string">"START n=node(*) RETURN count(n);"</span>
    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/^r(elationship)*$/i</span>.test(type))
      query = <span class="string">"START r=relationship(*) RETURN count(r);"</span>;
    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/^[nr]\:.+/</span>.test(type))</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>count labels</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      query = <span class="string">"MATCH "</span>+type+<span class="string">" RETURN "</span>+type[<span class="number">0</span>]+<span class="string">";"</span>;
    <span class="keyword">else</span>
      query = <span class="string">"START n=node(*) MATCH n-[r?]-() RETURN count(n), count(r);"</span>;
    <span class="keyword">return</span> Graph.query(query, <span class="keyword">function</span>(err,data){
      <span class="keyword">if</span> ((data)&amp;&amp;(data.data)) {
        <span class="keyword">var</span> count = data.data[<span class="number">0</span>][<span class="number">0</span>];
        <span class="keyword">if</span> (<span class="keyword">typeof</span> data.data[<span class="number">0</span>][<span class="number">1</span>] !== <span class="string">'undefined'</span>)
          count += data.data[<span class="number">0</span>][<span class="number">1</span>];
        <span class="keyword">return</span> cb(err, count);
      }
      cb(err,data);
    });
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <h3>Counts all relationships</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Graph.prototype.countRelationships = <span class="keyword">function</span>(cb) {
    <span class="keyword">return</span> <span class="keyword">this</span>.countAllOfType(<span class="string">'relationship'</span>, cb);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>alias for countRelationships()</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Graph.prototype.countRelations = <span class="keyword">function</span>(cb) {
    <span class="keyword">return</span> <span class="keyword">this</span>.countRelationships(cb);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <h3>Counts all nodes</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Graph.prototype.countNodes = <span class="keyword">function</span>(cb) {
    <span class="keyword">return</span> <span class="keyword">this</span>.countAllOfType(<span class="string">'node'</span>, cb);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <h3>Counts all relationships and nodes</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Graph.prototype.countAll = <span class="keyword">function</span>(cb) {
    <span class="keyword">return</span> <span class="keyword">this</span>.countAllOfType(<span class="string">'all'</span>, cb);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <h3>Queries information of the database and stores it on <code>this.info</code></h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Graph.prototype.about = <span class="keyword">function</span>(cb) {
    <span class="keyword">var</span> self = <span class="keyword">this</span>;
    <span class="keyword">if</span> (<span class="keyword">this</span>.info)
      <span class="keyword">return</span> cb(<span class="literal">null</span>,info);
    <span class="keyword">else</span>
      <span class="keyword">return</span> <span class="keyword">this</span>.neo4jrestful.get(<span class="string">'/'</span>+<span class="keyword">this</span>.neo4jrestful.urlOptions.endpoint, <span class="keyword">function</span>(err, info){
        <span class="keyword">if</span> (info) {
          self.info = info
        }
        <span class="keyword">if</span> (<span class="keyword">typeof</span> cb === <span class="string">'function'</span>)
          cb(err,info);
      });
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <h3>Reset the query history</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Graph.prototype.resetQuery = <span class="keyword">function</span>() {
    <span class="keyword">this</span>._query_history_ = [];
    <span class="keyword">this</span>._queryString_ = <span class="string">''</span>;
    <span class="keyword">this</span>.cypher = {};
    <span class="keyword">for</span> (<span class="keyword">var</span> attr <span class="keyword">in</span> Graph.prototype.cypher) {
      <span class="keyword">this</span>.cypher[attr] = Graph.prototype.cypher[attr];
    }
    <span class="keyword">this</span>.cypher.parameters = {};
    <span class="keyword">return</span> <span class="keyword">this</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <h3>Startpoint to begin query chaining</h3>
<p>e.g. Graph.start().where( …</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Graph.prototype.start = <span class="keyword">function</span>(start, cb) {
    <span class="keyword">this</span>.resetQuery();
    <span class="keyword">if</span> (<span class="keyword">typeof</span> start !== <span class="string">'string'</span>) {
      cb = start;
      start = <span class="literal">null</span>;
    }
    <span class="keyword">if</span> (start)
      <span class="keyword">this</span>._query_history_.push({ START: start });
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.match = <span class="keyword">function</span>(match, cb) {
    <span class="keyword">this</span>._query_history_.push({ MATCH: match });
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.onMatch = <span class="keyword">function</span>(onMatch, cb) {
    <span class="keyword">this</span>._query_history_.push({ ON_MATCH: onMatch });
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.<span class="keyword">with</span> = <span class="keyword">function</span>(withStatement, cb) {
    <span class="keyword">this</span>._query_history_.push({ WITH: withStatement });
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.skip = <span class="keyword">function</span>(skip, cb) {
    skip = parseInt(skip);
    <span class="keyword">if</span> (skip === <span class="literal">NaN</span>)
      <span class="keyword">throw</span> Error(<span class="string">'SKIP must be an integer'</span>);
    <span class="keyword">this</span>._query_history_.push({ SKIP: skip });
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.limit = <span class="keyword">function</span>(limit, cb) {
    limit = parseInt(limit);
    <span class="keyword">if</span> (limit === <span class="literal">NaN</span>)
      <span class="keyword">throw</span> Error(<span class="string">'LIMIT must be an integer'</span>);
    <span class="keyword">this</span>._query_history_.push({ LIMIT: limit });
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.merge = <span class="keyword">function</span>(merge, cb) {</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>TODO: values to parameter</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">this</span>._query_history_.push({ MERGE: merge });
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.custom = <span class="keyword">function</span>(statement, cb) {
    <span class="keyword">this</span>._query_history_.push(statement);
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>will be used to send statements
Graph.prototype.statement = null;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Graph.prototype.set = <span class="keyword">function</span>(set, cb) {
    <span class="keyword">if</span> ((<span class="keyword">typeof</span> set === <span class="string">'object'</span>)&amp;&amp;(set.constructor === Array)) {
      set = set.join(<span class="string">', '</span>);
    }
    <span class="keyword">this</span>._query_history_.push({ SET: set });
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.create = <span class="keyword">function</span>(create, cb) {
    <span class="keyword">this</span>._query_history_.push({ CREATE: create });
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.onCreate = <span class="keyword">function</span>(onCreate, cb) {
    <span class="keyword">this</span>._query_history_.push({ ON_CREATE: onCreate });
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.createUnique = <span class="keyword">function</span>(create, cb) {
    <span class="keyword">this</span>._query_history_.push({ CREATE_UNIQUE: create });
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.createIndexOn = <span class="keyword">function</span>(createIndexOn, cb) {
    <span class="keyword">this</span>._query_history_.push({ CREATE_INDEX_ON: createIndexOn });
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.<span class="keyword">case</span> = <span class="keyword">function</span>(caseStatement, cb) {
    <span class="keyword">this</span>._query_history_.push({ CASE: caseStatement.replace(<span class="regexp">/END\s*$/i</span>,<span class="string">''</span>) + <span class="string">' END '</span> });
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.dropIndexOn = <span class="keyword">function</span>(dropIndexOn, cb) {
    <span class="keyword">this</span>._query_history_.push({ DROP_INDEX_ON: dropIndexOn });
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.orderBy = <span class="keyword">function</span>(property, cb) {
    <span class="keyword">var</span> direction = <span class="string">''</span>
      , s = <span class="string">''</span>;
    <span class="keyword">if</span> (<span class="keyword">typeof</span> property === <span class="string">'object'</span>) {
      <span class="keyword">var</span> key = Object.keys(property)[<span class="number">0</span>];
      cb = direction;
      direction = property[key];
      property = key;
      direction = ( (<span class="keyword">typeof</span> direction === <span class="string">'string'</span>) &amp;&amp; ((<span class="regexp">/^(ASC|DESC)$/</span>).test(direction)) ) ? direction : <span class="string">'ASC'</span>;
      s = property+<span class="string">' '</span>+direction;
    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> property === <span class="string">'string'</span>) {
      s = property;
    }
    <span class="keyword">this</span>._query_history_.push({ ORDER_BY: s });
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.where = <span class="keyword">function</span>(where, cb) {
    <span class="keyword">if</span> (<span class="keyword">typeof</span> where === <span class="string">'string'</span>) {
      <span class="keyword">this</span>._query_history_.push({ WHERE: where });
      <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
    }
    <span class="keyword">if</span> (<span class="keyword">this</span>.cypher._useParameters === <span class="literal">null</span>)
      <span class="keyword">this</span>.cypher._useParameters = <span class="literal">true</span>;
    <span class="keyword">if</span> (!_.isArray(where))
      where = [ where ];
    <span class="keyword">var</span> options = { valuesToParameters: <span class="keyword">this</span>.cypher._useParameters };
    <span class="keyword">var</span> condition = <span class="keyword">new</span> helpers.ConditionalParameters(where, options)
    , whereCondition = condition.toString().replace(<span class="regexp">/^\(\s(.+)\)$/</span>, <span class="string">'$1'</span>);
    <span class="keyword">this</span>._query_history_.push({ WHERE: whereCondition });
    <span class="keyword">if</span> (<span class="keyword">this</span>.cypher._useParameters)
      <span class="keyword">this</span>._addParametersToCypher(condition.parameters);
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.<span class="keyword">return</span> = <span class="keyword">function</span>(returnStatement, cb) {
    <span class="keyword">this</span>._query_history_.push({ RETURN: returnStatement });
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.returnDistinct = <span class="keyword">function</span>(returnStatement, cb) {
    <span class="keyword">this</span>._query_history_.push({ RETURN_DISTINCT: returnStatement });
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.<span class="keyword">delete</span> = <span class="keyword">function</span>(deleteStatement, cb) {
    <span class="keyword">this</span>._query_history_.push({ DELETE: deleteStatement });
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.remove = <span class="keyword">function</span>(remove, cb) {
    <span class="keyword">this</span>._query_history_.push({ REMOVE: remove });
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.foreach = <span class="keyword">function</span>(foreach, cb) {
    <span class="keyword">this</span>._query_history_.push({ FOREACH: foreach });
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.union = <span class="keyword">function</span>(s, cb) {
    <span class="keyword">this</span>._query_history_.push({ UNION: s });
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.using = <span class="keyword">function</span>(s, cb) {
    <span class="keyword">this</span>._query_history_.push({ USING: s });
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.comment = <span class="keyword">function</span>(comment, cb) {
    <span class="keyword">this</span>.custom(<span class="string">' /* '</span>+comment.replace(<span class="regexp">/^\s*\/\*\s*/</span>,<span class="string">''</span>).replace(<span class="regexp">/\s*\*\/\s*$/</span>,<span class="string">''</span>)+<span class="string">' */ '</span>);
    <span class="keyword">return</span> <span class="keyword">this</span>.exec(cb);
  }

  Graph.prototype.toCypherQuery = <span class="keyword">function</span>(options) {
    <span class="keyword">var</span> s = <span class="string">''</span>
      , chopLength = <span class="number">15</span>
      , defaultOptions = {
          niceFormat: <span class="literal">true</span>
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>if a query string is attached, return this and skip query building</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (<span class="keyword">this</span>._queryString_) {
      <span class="keyword">return</span> <span class="keyword">this</span>._queryString_;
    }
    <span class="keyword">if</span> (<span class="keyword">typeof</span> options !== <span class="string">'object'</span>)
      options = {};
    <span class="keyword">else</span>
      _.defaults(options, defaultOptions);
    <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i &lt; <span class="keyword">this</span>._query_history_.length; i++) {
      <span class="keyword">var</span> queryFragment = <span class="keyword">this</span>._query_history_[i];
      <span class="keyword">if</span> (<span class="keyword">typeof</span> queryFragment === <span class="string">'string'</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>if we have just a string, we add the string to final query, no manipulation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        s += queryFragment;
        <span class="keyword">continue</span>;
      }
      <span class="keyword">var</span> attribute = Object.keys(<span class="keyword">this</span>._query_history_[i])[<span class="number">0</span>];
      <span class="keyword">var</span> forQuery = <span class="keyword">this</span>._query_history_[i][attribute];</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>remove underscore from attribute, e.g. ORDER_BY -&gt; ORDER BY</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      attribute = attribute.replace(<span class="regexp">/([A-Z]{1})\_([A-Z]{1})/g</span>, <span class="string">'$1 $2'</span>);
      <span class="keyword">if</span> (options.niceFormat) {</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>extend attribute-string with whitespace</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        attribute = attribute + Array(chopLength - attribute.length).join(<span class="string">' '</span>);
      }
      <span class="keyword">if</span> (forQuery !== <span class="literal">null</span>) {
        <span class="keyword">if</span> (<span class="keyword">typeof</span> forQuery === <span class="string">'string'</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>remove dupliacted statement fragment identifier, e.g. START START … -&gt; START …</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          forQuery = forQuery.trim().replace(<span class="keyword">new</span> RegExp(<span class="string">'^'</span>+attribute+<span class="string">'\\s+'</span>, <span class="string">'i'</span>), <span class="string">''</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>remove trailing semicolon</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          forQuery = forQuery.replace(<span class="regexp">/\;$/</span>, <span class="string">''</span>);
        } <span class="keyword">else</span> {
          forQuery = String(forQuery);
        }
        s += <span class="string">'\n'</span>+attribute+<span class="string">' '</span>+forQuery+<span class="string">' '</span>;
      }
    }
    s = s.trim();
    <span class="keyword">return</span> s + <span class="string">';'</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <h1>Enables loading for specific types</h1>
<p>Define type(s) simply in a string
e.g.:
&#39;node|relationship|path&#39; or &#39;*&#39; to enable load for all types
&#39;node|relationship&#39; to enable for node + relationships
&#39;&#39; to disable for all (you can also use <code>disableLoading()</code> instead)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Graph.prototype.enableLoading = <span class="keyword">function</span>(classifications) {
    <span class="keyword">if</span> (classifications === <span class="string">'*'</span>)
      classifications = <span class="string">'node|relationship|path'</span>;
    <span class="keyword">this</span>._loadOnResult_ = classifications;
    <span class="keyword">return</span> <span class="keyword">this</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <h1>Disables loading on results (speeds up queries but less convenient)</h1>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Graph.prototype.disableLoading = <span class="keyword">function</span>() {
    <span class="keyword">this</span>._loadOnResult_ = <span class="string">''</span>;
    <span class="keyword">return</span> <span class="keyword">this</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <h1>Sort Results</h1>
<p>By default we get results like:
{ columns: [ &#39;node&#39; ], data: [ [ { nodeObject#1 } ], … [ { nodeObject#n} ]] }
To keep it more handy, we return just the data
and (if we have only 1 column) instead of [ {node} ] -&gt; {node}
If you want to have access to the columns anyway, you can get them on <code>graph._columns_</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Graph.prototype.sortResult = <span class="keyword">function</span>(trueOrFalse) {
    <span class="keyword">if</span> (<span class="keyword">typeof</span> trueOrFalse === <span class="string">'undefined'</span>)
      trueOrFalse = <span class="literal">true</span>;
    <span class="keyword">this</span>._resortResults_ = trueOrFalse;
    <span class="keyword">return</span> <span class="keyword">this</span>;
  }

  Graph.prototype.enableSorting = <span class="keyword">function</span>() {
    <span class="keyword">return</span> <span class="keyword">this</span>.sortResult(<span class="literal">true</span>);
  }

  Graph.prototype.disableSorting = <span class="keyword">function</span>() {
    <span class="keyword">return</span> <span class="keyword">this</span>.sortResult(<span class="literal">false</span>);
  }

  Graph.prototype.enableProcessing = <span class="keyword">function</span>() {
    <span class="keyword">this</span>.sortResult(<span class="literal">true</span>);
    <span class="keyword">this</span>.enableLoading(<span class="string">'*'</span>);
    <span class="keyword">return</span> <span class="keyword">this</span>;
  }

  Graph.prototype.disableProcessing = <span class="keyword">function</span>() {
    <span class="keyword">this</span>.sortResult(<span class="literal">false</span>);
    <span class="keyword">this</span>.disableLoading();
    <span class="keyword">return</span> <span class="keyword">this</span>;
  }

  Graph.prototype.log = <span class="keyword">function</span>(){ <span class="comment">/* &gt; /dev/null */</span> };</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>Expect s.th. like [ value, value2 ] or [ { key1: value }, { key2: value } ]</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Graph.prototype._addParametersToCypher = <span class="keyword">function</span>(parameters) {
    <span class="keyword">if</span> ( (<span class="keyword">typeof</span> parameters === <span class="string">'object'</span>) &amp;&amp; (parameters) &amp;&amp; (parameters.constructor === Array) ) {
      <span class="keyword">if</span> (!<span class="keyword">this</span>.cypher.parameters)
        <span class="keyword">this</span>.cypher.parameters = {};
      <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i &lt; parameters.length; i++) {
        <span class="keyword">this</span>._addParameterToCypher(parameters[i]);
      }
    } <span class="keyword">else</span> {
      <span class="keyword">throw</span> Error(<span class="string">'You need to pass parameters as array'</span>);
    }
    <span class="keyword">return</span> <span class="keyword">this</span>.cypher.parameters;
  }

  Graph.prototype._addParameterToCypher = <span class="keyword">function</span>(parameter) {
    <span class="keyword">if</span> (!<span class="keyword">this</span>.cypher.parameters)
      <span class="keyword">this</span>.cypher.parameters = {};
    <span class="keyword">if</span> (<span class="keyword">typeof</span> parameter === <span class="string">'object'</span>) {
      _.extend(<span class="keyword">this</span>.cypher.parameters, parameter);
    } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>we name the parameter with <code>_value#_</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">var</span> count = Object.keys(<span class="keyword">this</span>.cypher.parameters).length;
      <span class="keyword">this</span>.cypher.parameters[<span class="string">'_value'</span>+count+<span class="string">'_'</span>] = parameter;
    }
    <span class="keyword">return</span> <span class="keyword">this</span>.cypher.parameters;
  }

  <span class="comment">/*
   * Static methods
   * (are shortcuts to methods on new instanced Graph())
   */</span>
  Graph.query = <span class="keyword">function</span>(cypher, options, cb) {
    <span class="keyword">return</span> Graph.disableProcessing().query(cypher, options, cb);
  }

  Graph.stream = <span class="keyword">function</span>(cypher, options, cb) {
    <span class="keyword">return</span> <span class="keyword">new</span> Graph.disableProcessing().stream(cypher, options, cb);
  }

  Graph.wipeDatabase = <span class="keyword">function</span>(cb) {
    <span class="keyword">return</span> <span class="keyword">new</span> Graph().wipeDatabase(cb);
  }

  Graph.countAllOfType = <span class="keyword">function</span>(type, cb) {
    <span class="keyword">return</span> <span class="keyword">new</span> Graph().countAllOfType(type, cb);
  }

  Graph.countRelationships = <span class="keyword">function</span>(cb) {
    <span class="keyword">return</span> <span class="keyword">new</span> Graph().countRelationships(cb);
  }

  Graph.countRelations = <span class="keyword">function</span>(cb) {
    <span class="keyword">return</span> <span class="keyword">new</span> Graph().countRelationships(cb);
  }

  Graph.countNodes = <span class="keyword">function</span>(cb) {
    <span class="keyword">return</span> <span class="keyword">new</span> Graph().countNodes(cb);
  }

  Graph.countAll = <span class="keyword">function</span>(cb) {
    <span class="keyword">return</span> <span class="keyword">new</span> Graph().countAll(cb);
  }

  Graph.about = <span class="keyword">function</span>(cb) {
    <span class="keyword">return</span> <span class="keyword">new</span> Graph().about(cb);
  }

  Graph.start = <span class="keyword">function</span>(start, cb) {
    <span class="keyword">return</span> Graph.enableProcessing().start(start, cb);
  }

  Graph.custom = <span class="keyword">function</span>(statement, cb) {
    <span class="keyword">return</span> Graph.start().custom(statement, cb);
  }

  Graph.match = <span class="keyword">function</span>(statement, cb) {
    <span class="keyword">return</span> Graph.start().match(statement, cb);
  }

  Graph.where = <span class="keyword">function</span>(statement, cb) {
    <span class="keyword">return</span> Graph.start().where(statement, cb);
  }

  Graph.<span class="keyword">return</span> = <span class="keyword">function</span>(statement, cb) {
    <span class="keyword">return</span> Graph.start().<span class="keyword">return</span>(statement, cb);
  }

  Graph.enableLoading = <span class="keyword">function</span>(classifications) {
    Graph.prototype.enableLoading(classifications);
    <span class="keyword">return</span> <span class="keyword">new</span> Graph().enableLoading(classifications);
  }

  Graph.disableLoading = <span class="keyword">function</span>() {
    Graph.prototype.disableLoading();
    <span class="keyword">return</span> <span class="keyword">new</span> Graph().disableLoading();
  }

  Graph.disableProcessing = <span class="keyword">function</span>() {
    Graph.prototype.disableProcessing();
    <span class="keyword">return</span> <span class="keyword">new</span> Graph().disableProcessing();
  }

  Graph.enableProcessing = <span class="keyword">function</span>() {
    Graph.prototype.enableProcessing();
    <span class="keyword">return</span> <span class="keyword">new</span> Graph().enableProcessing();
  }

  Graph.enableSorting = <span class="keyword">function</span>() {
    Graph.prototype.enableSorting();
    <span class="keyword">return</span> <span class="keyword">new</span> Graph().enableSorting();
  }

  Graph.disableSorting = <span class="keyword">function</span>() {
    Graph.prototype.disableSorting();
    <span class="keyword">return</span> <span class="keyword">new</span> Graph().disableSorting();
  }

  Graph.request = <span class="keyword">function</span>() {</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>creates a new neo4jrestful client</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">return</span> neo4jrestful.singleton();
  }

  Graph.<span class="keyword">new</span> = <span class="keyword">function</span>(url) {
    <span class="keyword">return</span> <span class="keyword">new</span> Graph(url);
  }

  Graph.create = <span class="keyword">function</span>(statement, cb) {
    <span class="keyword">return</span> Graph.start().create(statement, cb);
  }

  <span class="keyword">return</span> neo4jrestful.Graph = Graph;
}

<span class="keyword">if</span> (<span class="keyword">typeof</span> window !== <span class="string">'object'</span>) {
  module.exports = exports = {
    init: __initGraph__
  };
} <span class="keyword">else</span> {
  window.Neo4jMapper.initGraph = __initGraph__;
}</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
